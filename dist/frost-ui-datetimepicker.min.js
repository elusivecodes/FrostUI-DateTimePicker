!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e:e(t)}(window,(function(t){"use strict";if(!t)throw new Error("FrostUI-DateTimePicker requires a Window.");if(!("UI"in t))throw new Error("FrostUI-DateTimePicker requires FrostUI.");if(!("DateTime"in t))throw new Error("FrostUI-DateTimePicker requires FrostDateTime.");const e=t.Core,s=t.dom,i=t.QuerySet,a=t.UI,n=t.DateTime,r=t.document;class o{constructor(t,i,a=!1){this._node=t,this._settings=e.extend({},this.constructor.defaults,s.getDataset(this._node),i),this._autoInit=a,this._date=null,this._dates=[],this._minDate=null,this._maxDate=null,this._timeViewMode=null,this._hasDate=!1,this._hasHours=!1,this._hasMinutes=!1,this._hasSeconds=!1,this._hasTime=!1,this._dateOptions={locale:this._settings.locale,timeZone:this._settings.timeZone},this._useDayPeriod=this.constructor._checkDayPeriod(this._settings.locale),this._settings.format||(this._settings.format=this._settings.multiDate?this.constructor._getDefaultDateFormat(this._settings.locale,this._useDayPeriod):this.constructor._getDefaultFormat(this._settings.locale,this._useDayPeriod)),this._checkFormat(),this._parseSettings(),this._update(),this._render(),this._events(),s.setData(this._node,"datetimepicker",this)}clear(){return this.setDate(null)}destroy(){this._popper&&this._popper.destroy(),s.removeEvent(this._node,"focus.frost.datetimepicker blur.frost.datetimepicker input.frost.datetimepicker keydown.frost.datetimepicker"),s.remove(this._menuNode),s.removeData(this._node,"datetimepicker")}hide(){!this._settings.inline&&!this._animating&&s.isConnected(this._menuNode)&&s.triggerOne(this._node,"hide.frost.datetimepicker")&&(this._animating=!0,s.fadeOut(this._menuNode,{duration:this._settings.duration}).then(t=>{s.detach(this._menuNode),s.setAttribute(this._node,"aria-expanded",!1),s.triggerEvent(this._node,"hidden.frost.datetimepicker")}).catch(t=>{}).finally(t=>{this._animating=!1}))}show(){this._settings.inline||this._animating||s.isConnected(this._menuNode)||s.is(this._node,":disabled")||!s.triggerOne(this._node,"show.frost.datetimepicker")||(this._animating=!0,s.append(r.body,this._menuNode),this._popper.update(),s.fadeIn(this._menuNode,{duration:this._settings.duration}).then(t=>{s.setAttribute(this._node,"aria-expanded",!0),s.triggerEvent(this._node,"shown.frost.datetimepicker"),this._settings.focusOnShow&&s.focus(this._node)}).catch(t=>{}).finally(t=>{this._animating=!1}))}toggle(){s.hasClass(this._menuNode,"show")?this.hide():this.show()}static autoHide(t){const e=s.find(".datetimepicker:not(.dtp-inline)");for(const i of e){const e=s.getDataset(i,"trigger"),a=s.findOne(e);if(a===t)continue;this.init(a).hide()}}static init(t,e,i=!1){return s.hasData(t,"datetimepicker")?s.getData(t,"datetimepicker"):new this(t,e,i)}}s.addEvent(r,"click.frost.datetimepicker",t=>{o.autoHide(t.target)}),s.addEvent(r,"keyup.frost.datetimepicker",t=>{switch(t.key){case"Tab":o.autoHide(t.target);case"Escape":o.autoHide()}}),s.addEventDelegate(r,"click.frost.datetimepicker",'[data-toggle="datetimepicker"]',t=>{t.preventDefault();const e=a.getTarget(t.currentTarget);o.init(e,{},!0).toggle(t.currentTarget)}),Object.assign(o.prototype,{_events(){this._autoInit||s.addEvent(this._node,"focus.frost.datetimepicker",t=>{this.show()}),s.addEvent(this._node,"blur.frost.datetimepicker",t=>{const e=s.getValue(this._node);if(this._settings.multiDate){const t=e.split(this._settings.multiDateSeparator),s=[];let i=!1;for(const e of t){try{const t=this._makeDate(e);t.isValid&&this._isValid(t,"second")?s.push(t):i=!0}catch(t){i=!0}if(i)break}i?this._settings.keepInvalid||this._setDates(this._dates):this._setDates(s)}else try{const t=this._makeDate(e);t.isValid&&this._isValid(t,"second")?this._setDate(t):this._settings.keepInvalid||this._setDate(this._date)}catch(t){this._settings.keepInvalid||this._setDate(this._date)}}),!this._settings.keyDown||this._settings.inline||this._settings.multiDate||s.addEvent(this._node,"keydown.frost.datetimepicker",t=>{this._settings.keyDown(t,this)}),s.addEvent(this._container,"click.frost.datetimepicker mousedown.frost.datetimepicker",t=>{t.preventDefault(),t.stopPropagation()}),s.addEventDelegate(this._container,"click.frost.datetimepicker","[data-action]",t=>{const e=t.currentTarget,i=s.getDataset(e,"action"),a=this._date?this._date.clone():this._now();switch(i){case"setDate":a.setYear(s.getDataset(e,"year"),s.getDataset(e,"month"),s.getDataset(e,"date")),this._setDate(a),this._hasTime||this._settings.keepOpen||this.hide();break;case"setDateMulti":a.setYear(s.getDataset(e,"year"),s.getDataset(e,"month"),s.getDataset(e,"date")),this._isCurrent(a)?this._dates=this._dates.filter(t=>!t.isSame(a,"day")):this._dates.push(a),this._viewDate=a.clone(),this._setDates(this._dates);break;case"nextTime":case"prevTime":const t="prevTime"===i?"sub":"add",n=s.getDataset(e,"unit");a[t]("minute"===n?this._settings.stepping:1,n),this._setDate(a);break;case"togglePeriod":const r=a.getHours();a.setHours(r+(r<12?12:-12)),this._setDate(a);break;case"setHours":a.setHours(s.getDataset(e,"hour")),this._timeViewMode=null,this._setDate(a);break;case"setMinutes":a.setMinutes(s.getDataset(e,"minute")),this._timeViewMode=null,this._setDate(a);break;case"setSeconds":a.setSeconds(s.getDataset(e,"second")),this._timeViewMode=null,this._setDate(a);break;case"changeView":this._viewMode=s.getDataset(e,"view"),s.hasDataset(e,"year")&&this._viewDate.setYear(s.getDataset(e,"year"),s.getDataset(e,"month")||1,s.getDataset(e,"date")||1),this._refreshDate();break;case"changeTimeView":this._timeViewMode=s.getDataset(e,"timeView"),this._refreshTime();break;case"showTime":s.setStyle(this._timeContainer,"display",""),s.squeezeIn(this._timeContainer,{duration:100}),s.squeezeOut(this._dateContainer,{duration:100}).then(t=>{s.setStyle(this._dateContainer,"display","none",!0)});break;case"showDate":s.setStyle(this._dateContainer,"display",""),s.squeezeIn(this._dateContainer,{duration:100}),s.squeezeOut(this._timeContainer,{duration:100}).then(t=>{s.setStyle(this._timeContainer,"display","none",!0)});break;case"next":case"prev":const o="prev"===i?"sub":"add";this._viewDate[o](s.getDataset(e,"amount")||1,s.getDataset(e,"unit")),this._refreshDate()}})}}),Object.assign(o.prototype,{_checkFormat(){const t=this._settings.format.matchAll(this.constructor._formatTokenRegExp);for(const e of t)if(e[1])switch(e[1]){case"G":case"y":case"Y":case"q":case"Q":case"M":case"L":case"w":case"W":case"d":case"D":case"F":case"E":case"e":case"c":this._hasDate=!0;break;case"h":case"H":case"K":case"k":this._hasHours=!0;break;case"m":this._hasMinutes=!0;break;case"s":this._hasSeconds=!0}if(this._hasTime=this._hasHours||this._hasMinutes||this._hasSeconds,this._settings.multiDate&&this._hasTime)throw new Error("Time components cannot be used with multiDate option.");if(this._settings.multiDate&&!this._hasDate)throw new Error("Date components must be used with multiDate option.")},_clampDate(t){this._minDate&&this._minDate.isAfter(t)&&t.setTimestamp(this._minDate.getTimestamp()),this._maxDate&&this._maxDate.isBefore(t)&&t.setTimestamp(this._maxDate.getTimestamp())},_clampStepping(t){const s=t.getMinutes(),i=Math.min(e.toStep(s,this._settings.stepping),60);s!==i&&t.setMinutes(i),this._settings.stepping>1&&t.setSeconds(0)},_isAfterMin(t,e="second"){return!this._minDate||!t.isBefore(this._minDate,e)},_isBeforeMax(t,e="second"){return!this._maxDate||!t.isAfter(this._maxDate,e)},_isCurrent(t,e="day"){return this._settings.multiDate?!!this._dates.find(s=>s.isSame(t,e)):this._date&&this._date.isSame(t,e)},_isValid(t,e="second"){let s;switch(e){case"year":case"month":case"day":s=e;break;default:s="second"}return!!this._isAfterMin(t,s)&&(!!this._isBeforeMax(t,s)&&(!(this._settings.isValidYear&&!this._settings.isValidYear(t))&&("year"===e||!(this._settings.isValidMonth&&!this._settings.isValidMonth(t))&&("month"===e||!(this._settings.isValidDay&&!this._settings.isValidDay(t))&&("day"===e||!this._hasTime||!(this._settings.isValidTime&&!this._settings.isValidTime(t)))))))},_makeDate(t){return n.fromFormat(this._settings.format,t,this._dateOptions)},_now(){return n.now(this._dateOptions)},_parseDate(t){if(!t)return null;if(t instanceof n)return n.fromTimestamp(t.getTimestamp(),this._dateOptions);if(e.isString(t))try{return this._makeDate(t)}catch(e){return new n(t,this._dateOptions)}return t instanceof Date?n.fromDate(t,this._dateOptions):e.isNumber(t)?n.fromTimestamp(t,this._dateOptions):e.isArray(t)?n.fromArray(t,this._dateOptions):null},_parseDates(t){return t?t.map(t=>this._parseDate(t)).filter(t=>!!t):null},_parseSettings(){switch(this._settings.minView){case"years":this._viewMode="years";break;case"months":this._viewMode="months";break;default:this._viewMode="days"}const t=s.getValue(this._node);t&&(this._date=this._makeDate(t)),!this._date&&this._settings.defaultDate&&(this._date=this._parseDate(this._settings.defaultDate)),!this._date&&this._settings.useCurrent&&(this._date=this._now()),this._settings.multiDate&&this._date&&(this._dates.push(this._date),this._date=null),this._settings.minDate&&(this._minDate=this._parseDate(this._settings.minDate)),this._settings.maxDate&&(this._maxDate=this._parseDate(this._settings.maxDate)),this._settings.viewDate&&(this._viewDate=this._parseDate(this._settings.viewDate)),!this._viewDate&&this._date&&(this._viewDate=this._date.clone()),this._viewDate||(this._viewDate=this._now())},_setDate(t){t&&(this._clampStepping(t),this._viewDate=t.clone()),s.triggerEvent(this._node,"change.frost.datetimepicker",{old:this._date?this._date.clone():null,new:t?t.clone():null}),this._date=t,this._update(),this.refresh()},_setDates(t){for(const e of t)this._clampStepping(e);t=t.sort((t,e)=>t.isBefore(e)?-1:1),s.triggerEvent(this._node,"change.frost.datetimepicker",{old:this._dates.map(t=>t.clone()),new:t.map(t=>t.clone())}),this._dates=t,this._update(),this.refresh()},_update(){let t="";if(this._settings.multiDate){if(!this._settings.keepInvalid)for(const t of this._dates)this._clampDate(t);t=this._dates.map(t=>t.format(this._settings.format)).join(this._settings.multiDateSeparator)}else this._date&&(this._settings.keepInvalid||this._clampDate(this._date),t=this._date.format(this._settings.format));return s.setValue(this._node,t),this}}),Object.assign(o.prototype,{_refreshDate(){switch(s.empty(this._dateContainer),this._viewMode){case"years":this._renderYears();break;case"months":this._renderMonths();break;case"days":this._renderDays()}if(!this._settings.sideBySide&&this._hasTime){const t=this.constructor._createTable({body:t=>{const e=s.create("tr");s.append(t,e);const i=s.create("td",{html:'<span. class="icon-clock"></>',class:"dtp-action py-2",attributes:{colspan:7,title:this._settings.tooltips.selectTime},dataset:{action:"showTime"}});s.append(e,i)}});s.append(this._dateContainer,t)}!this._settings.inline&&this._popper&&this._popper.update()},_refreshTime(){if(s.empty(this._timeContainer),!this._settings.sideBySide&&this._hasDate){const t=this.constructor._createTable({body:t=>{const e=s.create("tr");s.append(t,e);const i=s.create("td",{html:'<span class="icon-calendar"></span>',class:"dtp-action py-2",attributes:{colspan:4,title:this._settings.tooltips.selectDate},dataset:{action:"showDate"}});s.append(e,i)}});s.append(this._timeContainer,t)}switch(this._timeViewMode){case"hours":this._renderHours();break;case"minutes":this._renderMinutes();break;case"seconds":this._renderSeconds();break;default:this._renderTime()}!this._settings.inline&&this._popper&&this._popper.update()},_render(){this._menuNode=s.create("div",{class:"datetimepicker",dataset:{trigger:"#"+s.getAttribute(this._node,"id")}}),this._container=s.create("div",{class:"row row-cols-1 gy-0 gx-2"}),s.append(this._menuNode,this._container),this._hasDate&&(this._dateContainer=s.create("div",{class:"col d-flex flex-column"}),s.append(this._container,this._dateContainer),this._refreshDate()),this._hasTime&&(this._timeContainer=s.create("div",{class:"col d-flex flex-column"}),s.append(this._container,this._timeContainer),this._refreshTime()),this._hasDate&&this._hasTime&&(this._settings.sideBySide?(s.addClass(this._menuNode,"dtp-wide"),s.addClass(this._container,"row-cols-md-2")):s.setStyle(this._timeContainer,"display","none",!0)),this._settings.inline?(s.addClass(this._menuNode,"dtp-inline"),s.after(this._node,this._menuNode),s.hide(this._node)):(s.addClass(this._menuNode,"shadow-sm"),this._popper=new a.Popper(this._menuNode,{reference:this._node,placement:this._settings.placement,position:this._settings.position,fixed:this._settings.fixed,spacing:this._settings.spacing,minContact:this._settings.minContact}))},_renderDays(){const t=this._viewDate.clone().startOf("month"),e=this._viewDate.clone().endOf("month"),i=t.clone().startOf("week"),a=e.clone().endOf("week");let n,r;t.sub(1,"second"),e.add(1,"second"),this._isAfterMin(t)&&(n={data:{action:"prev",unit:"month"},attr:{title:this._settings.tooltips.prevMonth}}),this._isBeforeMax(e)&&(r={data:{action:"next",unit:"month"},attr:{title:this._settings.tooltips.nextMonth}});const o=this.constructor._createTable({icons:this._settings.icons,header:{title:this._viewDate.format("MMMM yyyy"),data:{action:"changeView",view:"months"},attr:{title:this._settings.tooltips.selectMonth},prev:n,next:r},head:t=>{const e=s.create("tr");s.append(t,e);const a=i.clone();for(let t=1;t<=7;t++){a.setWeekDay(t);const i=s.create("th",{class:"fw-bold",text:a.dayName("narrow")});s.append(e,i)}},body:t=>{let e;const n=this._now();for(;i.isSameOrBefore(a,"day");){1===i.getWeekDay()&&(e=s.create("tr"),s.append(t,e));const a=s.create("td",{text:i.format("dd")});s.append(e,a),this._isCurrent(i,"day")?s.addClass(a,"dtp-active"):this._viewDate.isSame(i,"month")||s.addClass(a,"text-secondary"),this._isValid(i,"day")?(s.addClass(a,"dtp-action"),s.setDataset(a,{action:this._settings.multiDate?"setDateMulti":"setDate",year:i.getYear(),month:i.getMonth(),date:i.getDate()})):s.addClass(a,"dtp-disabled"),n.isSame(i,"day")&&s.addClass(a,"dtp-today"),this._settings.renderDay&&this._settings.renderDay(i.clone(),a),i.add(1,"day")}}});s.append(this._dateContainer,o)},_renderHours(){const t=this._date?this._date:this._now(),e=t.clone().startOf("day"),i=t.clone().endOf("day"),a=this.constructor._createTable({borderless:!0,body:t=>{const a=s.create("tr");s.append(t,a);const n=s.create("td",{class:"p-0",attributes:{colspan:7}});s.append(a,n);const r=s.create("div",{class:"row g-0"});for(s.append(n,r);e.isSameOrBefore(i,"hour");){const t=s.create("div",{text:e.format("HH"),class:"col-3 px-1 py-2"});s.append(r,t),this._isValid(e,"hour")?(s.addClass(t,"dtp-action"),s.setDataset(t,{action:"setHours",hour:e.getHours()})):s.addClass(t,"dtp-disabled"),e.add(1,"hour")}}});s.append(this._timeContainer,a)},_renderMinutes(){const t=this._date?this._date:this._now(),e=t.clone().startOf("hour"),i=t.clone().endOf("hour"),a=this.constructor._createTable({borderless:!0,body:t=>{const a=s.create("tr");s.append(t,a);const n=s.create("td",{class:"p-0",attributes:{colspan:7}});s.append(a,n);const r=s.create("div",{class:"row g-0"});s.append(n,r);const o=1==this._settings.stepping?5:this._settings.stepping;for(;e.isSameOrBefore(i,"minute");){const t=s.create("span",{text:e.format("mm"),class:"col-3 px-1 py-2"});s.append(r,t),this._isValid(e,"minute")?(s.addClass(t,"dtp-action"),s.setDataset(t,{action:"setMinutes",minute:e.getMinutes()})):s.addClass(t,"dtp-disabled"),e.add(o,"minutes")}}});s.append(this._timeContainer,a)},_renderMonths(){const t=this._viewDate.clone().startOf("year"),e=this._viewDate.clone().endOf("year"),i=t.clone(),a=e.clone();let n,r;t.sub(1,"second"),e.add(1,"second"),this._isAfterMin(t)&&(n={data:{action:"prev",unit:"year"},attr:{title:this._settings.tooltips.prevYear}}),this._isBeforeMax(e)&&(r={data:{action:"next",unit:"year"},attr:{title:this._settings.tooltips.nextYear}});const o=this.constructor._createTable({icons:this._settings.icons,header:{title:this._viewDate.format("yyyy"),wide:!0,data:{action:"changeView",view:"years"},attr:{title:this._settings.tooltips.selectYear},prev:n,next:r},body:t=>{const e=s.create("tr");s.append(t,e);const n=s.create("td",{class:"p-0",attributes:{colspan:7}});s.append(e,n);const r=s.create("div",{class:"row g-0"});for(s.append(n,r);i.isSameOrBefore(a,"month");){const t=s.create("div",{text:i.format("MMM"),class:"col-4 px-1 py-2"});s.append(r,t),this._isCurrent(i,"month")&&s.addClass(t,"dtp-active"),this._isValid(i,"month")?(s.addClass(t,"dtp-action"),"months"===this._settings.minView?s.setDataset(t,{action:this._settings.multiDate?"setDateMulti":"setDate",year:i.getYear(),month:i.getMonth()}):s.setDataset(t,{action:"changeView",view:"days",year:i.getYear(),month:i.getMonth()})):s.addClass(t,"dtp-disabled"),this._settings.renderMonth&&this._settings.renderMonth(i.clone(),t),i.add(1,"month")}}});s.append(this._dateContainer,o)},_renderSeconds(){const t=this._date?this._date:this._now(),e=t.clone().startOf("minute"),i=t.clone().endOf("minute"),a=this.constructor._createTable({borderless:!0,body:t=>{const a=s.create("tr");s.append(t,a);const n=s.create("td",{class:"p-0",attributes:{colspan:7}});s.append(a,n);const r=s.create("div",{class:"row g-0"});for(s.append(n,r);e.isSameOrBefore(i,"second");){const t=s.create("span",{text:e.format("ss"),class:"col-3 px-1 py-2"});s.append(r,t),this._isValid(e,"second")?(s.addClass(t,"dtp-action"),s.setDataset(t,{action:"setSeconds",second:e.getSeconds()})):s.addClass(t,"dtp-disabled"),e.add(5,"seconds")}}});s.append(this._timeContainer,a)},_renderTime(){const t=this._date?this._date:this._now(),e=this.constructor._createTable({borderless:!0,body:e=>{const i=(100-3*(this._hasHours+this._hasMinutes+this._hasSeconds-1))/(this._hasHours+this._hasMinutes+this._hasSeconds+this._useDayPeriod),a=s.create("tr");s.append(e,a);const n=s.create("tr");s.append(e,n);const r=s.create("tr");if(s.append(e,r),this._hasHours){let e,s;const o=t.clone().add(1,"hour");this._isValid(o,"hour")&&(e={data:{action:"nextTime",unit:"hour"},attr:{title:this._settings.tooltips.incrementHour}});const d=t.clone().sub(1,"hour");this._isValid(d,"hour")&&(s={data:{action:"prevTime",unit:"hour"},attr:{title:this._settings.tooltips.decrementHour}}),this.constructor._renderTimeColumn({icons:this._settings.icons,increment:e,select:{text:t.format(this._useDayPeriod?"hh":"HH"),data:{action:"changeTimeView",timeView:"hours"},attr:{title:this._settings.tooltips.selectHour}},decrement:s,cellWidth:i,upTr:a,timeTr:n,downTr:r})}if(this._hasHours&&this._hasMinutes&&this.constructor._renderTimeSeparator({separatorWidth:3,upTr:a,timeTr:n,downTr:r}),this._hasMinutes){let e,s;const o=t.getMinutes(),d=Math.min(o+this._settings.stepping,60),h=t.clone().setMinutes(d);this._isValid(h,"minute")&&(e={data:{action:"nextTime",unit:"minute"},attr:{title:this._settings.tooltips.incrementMinute}});const c=t.clone().sub(this._settings.stepping,"minute");this._isValid(c,"minute")&&(s={data:{action:"prevTime",unit:"minute"},attr:{title:this._settings.tooltips.decrementMinute}}),this.constructor._renderTimeColumn({icons:this._settings.icons,increment:e,select:{text:t.format("mm"),data:{action:"changeTimeView",timeView:"minutes"},attr:{title:this._settings.tooltips.selectMinute}},decrement:s,cellWidth:i,upTr:a,timeTr:n,downTr:r})}if((this._hasHours||this._hasMinutes)&&this._hasSeconds&&this.constructor._renderTimeSeparator({separatorWidth:3,upTr:a,timeTr:n,downTr:r}),this._hasSeconds){let e,s;const o=t.clone().add(1,"second");this._isValid(o,"second")&&(e={data:{action:"nextTime",unit:"second"},attr:{title:this._settings.tooltips.incrementSecond}});const d=t.clone().sub(1,"second");this._isValid(d,"second")&&(s={data:{action:"prevTime",unit:"second"},attr:{title:this._settings.tooltips.decrementSecond}}),this.constructor._renderTimeColumn({icons:this._settings.icons,increment:e,select:{text:t.format("ss"),data:{action:"changeTimeView",timeView:"seconds"},attr:{title:this._settings.tooltips.selectSecond}},decrement:s,cellWidth:i,upTr:a,timeTr:n,downTr:r})}if(this._useDayPeriod){const e=s.create("td",{style:{width:i+"%"}});s.append(a,e);const o=s.create("td");s.append(n,o);const d=s.create("span",{text:t.format("aa").toUpperCase(),class:"btn btn-primary d-block"}),h=t.getHours(),c=t.clone().setHours(h+(h<12?12:-12));this._isValid(c,"second")?(s.setDataset(d,{action:"togglePeriod"}),s.setAttribute(d,"title",this._settings.tooltips.togglePeriod)):s.addClass(d,"dtp-disabled"),s.append(o,d);const l=s.create("td");s.append(r,l)}}});s.append(this._timeContainer,e)},_renderYears(){const t=this._viewDate.clone().startOf("year"),e=this._viewDate.clone().endOf("year"),i=t.getYear(),a=i-i%10,n=a+9;t.setYear(a),e.setYear(n);const r=t.clone().sub(1,"year"),o=e.clone().add(1,"year");let d,h;t.sub(1,"second"),e.add(1,"second"),this._isAfterMin(t)&&(d={data:{action:"prev",unit:"years",amount:10},attr:{title:this._settings.tooltips.prevDecade}}),this._isBeforeMax(e)&&(h={data:{action:"next",unit:"years",amount:10},attr:{title:this._settings.tooltips.nextDecade}});const c=this.constructor._createTable({icons:this._settings.icons,header:{title:`${t.format("yyyy")} - ${e.format("yyyy")}`,wide:!0,prev:d,next:h},body:t=>{const e=s.create("tr");s.append(t,e);const i=s.create("td",{class:"p-0",attributes:{colspan:7}});s.append(e,i);const d=s.create("div",{class:"row g-0"});for(s.append(i,d);r.isSameOrBefore(o,"month");){const t=r.getYear(),e=s.create("div",{text:r.format("yyyy"),class:"col-4 px-1 py-2"});s.append(d,e),this._isCurrent(r,"year")?s.addClass(e,"dtp-active"):(t<a||t>n)&&s.addClass(e,"text-secondary"),this._isValid(r,"year")?(s.addClass(e,"dtp-action"),"years"===this._settings.minView?s.setDataset(e,{action:this._settings.multiDate?"setDateMulti":"setDate",year:t}):s.setDataset(e,{action:"changeView",view:"months",year:t})):s.addClass(e,"dtp-disabled"),this._settings.renderYear&&this._settings.renderYear(r.clone(),e),r.add(1,"year")}}});s.append(this._dateContainer,c)}}),Object.assign(o.prototype,{getDate(){return this._settings.multiDate?this._dates:this._date?this._date.clone():null},getMaxDate(){return this._maxDate?this._maxDate.clone():null},getMinDate(){return this._minDate?this._minDate.clone():null},getViewDate(){return this._viewDate.clone()},refresh(){this._hasDate&&this._refreshDate(),this._hasTime&&this._refreshTime()},setDate(t){if(this._settings.multiDate){const e=this._parseDates(t);this._setDates(e)}else t=this._parseDate(t),this._setDate(t);return this},setMaxDate(t){return this._maxDate=this._parseDate(t),this._update(),this.refresh(),this},setMinDate(t){return this._minDate=this._parseDate(t),this._update(),this.refresh(),this},setViewDate(t){return this._viewDate=this._parseDate(t),this.refresh(),this}}),Object.assign(o,{_checkDayPeriod(t){if(!(t in this._dayPeriods)){const e=new Intl.DateTimeFormat(t,{hour:"2-digit"});this._dayPeriods[t]=!!e.formatToParts(new Date).find(t=>"dayPeriod"===t.type)}return this._dayPeriods[t]},_getDefaultDateFormat(t){return t in this._defaultDateFormats||(this._defaultDateFormats[t]=this._formatFromParts(t,{year:"numeric",month:"2-digit",day:"2-digit"})),this._defaultDateFormats[t]},_getDefaultFormat(t,e){return t in this._defaultFormats||(this._defaultFormats[t]=this._formatFromParts(t,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"},e)),this._defaultFormats[t]},_formatFromParts:(t,e,s)=>new Intl.DateTimeFormat(t,e).formatToParts(new Date).map(t=>{switch(t.type){case"year":return"yyyy";case"month":return"MM";case"day":return"dd";case"hour":return s?"hh":"HH";case"minute":return"mm";case"dayPeriod":return"a"}return", "===t.value?" ":/[a-z]/i.test(t.value)?`'${t.value}'`:t.value}).join("")}),Object.assign(o,{_createTable(t){const e=s.create("table",{class:"table table-sm text-center mx-0 my-auto"});if(t.borderless&&s.addClass(e,"table-borderless"),t.header){const i=s.create("thead");s.append(e,i);const a=s.create("tr");s.append(i,a);const n=s.create("td",{html:`<span class="${t.icons.left}"></span>`,class:"action text-primary fw-bold"});t.header.prev?(s.addClass(n,"dtp-action"),s.setDataset(n,t.header.prev.data),s.setAttribute(n,t.header.prev.attr)):s.addClass(n,"dtp-disabled"),s.append(a,n);const r=s.create("td",{class:"fw-bold",text:t.header.title,attributes:{colspan:5,...t.header.attr},dataset:t.header.data});s.append(a,r),t.header.data&&s.addClass(r,"dtp-action"),t.header.wide&&s.addClass(r,"w-100");const o=s.create("td",{html:`<span class="${t.icons.right}"></span>`,class:"action text-primary fw-bold"});t.header.next?(s.addClass(o,"dtp-action"),s.setDataset(o,t.header.next.data),s.setAttribute(o,t.header.next.attr)):s.addClass(o,"dtp-disabled"),s.append(a,o),t.head&&t.head(i)}const i=s.create("tbody");return s.append(e,i),t.body(i),e},_renderTimeColumn(t){const e=s.create("td",{html:`<span class="${t.icons.up}"></span>`,class:"text-primary bw-bold py-4 px-0",style:{width:t.cellWidth+"%"}});t.increment?(s.addClass(e,"dtp-action"),s.setDataset(e,t.increment.data),s.setAttribute(e,t.increment.attr)):s.addClass(e,"dtp-disabled"),s.append(t.upTr,e);const i=s.create("td",{text:t.select.text,class:"dtp-action dtp-time py-2 px-0",dataset:t.select.data,attributes:t.select.attr});s.append(t.timeTr,i);const a=s.create("td",{html:`<span class="${t.icons.down}"></span>`,class:"text-primary bw-bold py-4 px-0"});t.decrement?(s.addClass(a,"dtp-action"),s.setDataset(a,t.decrement.data),s.setAttribute(a,t.decrement.attr)):s.addClass(a,"dtp-disabled"),s.append(t.downTr,a)},_renderTimeSeparator(t){const e=s.create("td",{style:{width:t.separatorWidth+"%"}});s.append(t.upTr,e);const i=s.create("td",{text:":",class:"time py-2"});s.append(t.timeTr,i);const a=s.create("td");s.append(t.downTr,a)}}),o.defaults={format:null,locale:DateFormatter.defaultLocale,timeZone:n.defaultTimeZone,defaultDate:null,minDate:null,maxDate:null,icons:{up:"icon-arrow-up",right:"icon-arrow-right",down:"icon-arrow-down",left:"icon-arrow-left"},tooltips:{decrementHour:"Decrement Hour",decrementMinute:"Decrement Minute",decrementSecond:"Decrement Second",incrementHour:"Increment Hour",incrementMinute:"Increment Minute",incrementSecond:"Increment Second",nextDecade:"Next Decade",nextMonth:"Next Month",nextYear:"Next Year",prevDecade:"Previous Decade",prevMonth:"Previous Month",prevYear:"Previous Year",selectDate:"Select Date",selectHour:"Select Hour",selectMinute:"Select Minute",selectMonth:"Select Month",selectSecond:"Select Second",selectTime:"Select Time",selectYear:"Select Year",togglePeriod:"Toggle Period"},isValidDay:null,isValidMonth:null,isValidTime:null,isValidYear:null,renderDay:null,renderMonth:null,renderYear:null,keyDown:(t,e)=>{let s=e._date?e._date:e._now();switch(t.key){case"ArrowUp":t.ctrlKey?s.sub(1,"year"):s.sub(7,"days");break;case"ArrowDown":t.ctrlKey?s.add(1,"year"):s.add(7,"days");break;case"ArrowRight":t.ctrlKey?s.add(1,"month"):s.add(1,"day");break;case"ArrowLeft":t.ctrlKey?s.sub(1,"month"):s.sub(1,"day");break;case"PageUp":s.add(1,"hour");break;case"PageDown":s.sub(1,"hour");break;case"Home":s=e._now();break;case"Delete":s=null;break;default:return}t.preventDefault(),s&&!e._isValid(s,"second")||e._setDate(s)},multiDate:!1,multiDateSeparator:",",useCurrent:!1,keepOpen:!1,focusOnShow:!0,inline:!1,sideBySide:!1,keepInvalid:!1,minView:null,stepping:1,duration:100,placement:"bottom",position:"start",fixed:!1,spacing:3,minContact:!1},o._formatTokenRegExp=/([a-z])\1*|'[^']*'/gi,o._dayPeriods={},o._defaultDateFormats={},o._defaultFormats={},i&&(i.prototype.dateTimePicker=function(t,...s){let i,a;e.isObject(t)?i=t:e.isString(t)&&(a=t);for(const t of this){if(!e.isElement(t))continue;const n=o.init(t,i);a&&n[a](...s)}return this}),a.DateTimePicker=o}));