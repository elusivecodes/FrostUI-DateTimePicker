!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e:e(t)}(window,(function(t){"use strict";if(!t)throw new Error("FrostUI-DateTimePicker requires a Window.");if(!("UI"in t))throw new Error("FrostUI-DateTimePicker requires FrostUI.");if(!("DateTime"in t))throw new Error("FrostUI-DateTimePicker requires FrostDateTime.");const e=t.Core,s=t.dom,i=t.QuerySet,a=t.UI,n=t.DateTime,r=t.document;class d{constructor(t,i){this._node=t,this._settings=e.extend({},this.constructor.defaults,s.getDataset(this._node),i),this._date=null,this._dates=[],this._minDate=null,this._maxDate=null,this._enabledDates=null,this._disabledDates=null,this._disabledDays=null,this._disabledHours=null,this._disabledTimeIntervals=null,this._timeViewMode=null,this._hasDate=!1,this._hasHours=!1,this._hasMinutes=!1,this._hasSeconds=!1,this._hasTime=!1,this._dateOptions={locale:this._settings.locale,timeZone:this._settings.timeZone},this._useDayPeriod=this.constructor.checkDayPeriod(this._settings.locale),this._settings.format||(this._settings.format=this._settings.multiDate?this.constructor.getDefaultDateFormat(this._settings.locale,this._useDayPeriod):this.constructor.getDefaultFormat(this._settings.locale,this._useDayPeriod)),this._checkFormat(),this._parseSettings(),this._render(),this._events(),this._update(),s.setData(this._node,"datetimepicker",this)}clear(){return this.setDate(null)}destroy(){this._popper&&this._popper.destroy(),s.remove(this._menuNode),s.removeEvent(this._node,"focus.frost.datetimepicker"),s.removeEvent(this._node,"keydown.frost.datetimepicker"),s.removeData(this._node,"datetimepicker")}hide(){!this._settings.inline&&!this._animating&&s.isConnected(this._menuNode)&&s.triggerOne(this._node,"hide.frost.datetimepicker")&&(this._animating=!0,s.fadeOut(this._menuNode,{duration:this._settings.duration}).then(t=>{s.detach(this._menuNode),s.setAttribute(this._node,"aria-expanded",!1),s.triggerEvent(this._node,"hidden.frost.datetimepicker")}).catch(t=>{}).finally(t=>{this._animating=!1}))}show(){this._settings.inline||this._animating||s.isConnected(this._menuNode)||!s.triggerOne(this._node,"show.frost.datetimepicker")||(this._animating=!0,s.append(r.body,this._menuNode),this._popper.update(),s.fadeIn(this._menuNode,{duration:this._settings.duration}).then(t=>{s.setAttribute(this._node,"aria-expanded",!0),s.triggerEvent(this._node,"shown.frost.datetimepicker"),this._settings.focusOnShow&&s.focus(this._node)}).catch(t=>{}).finally(t=>{this._animating=!1}))}toggle(){s.hasClass(this._menuNode,"show")?this.hide():this.show()}static autoHide(t){const e=s.find(".datetimepicker:not(.datetimepicker-inline)");for(const i of e){const e=s.getDataset(i,"trigger"),a=s.findOne(e);if(a===t)continue;this.init(a).hide()}}static init(t,e){return s.hasData(t,"datetimepicker")?s.getData(t,"datetimepicker"):new this(t,e)}}Object.assign(d.prototype,{_events(){s.addEvent(this._node,"input.frost.datetimepicker",t=>{const e=s.getValue(this._node);try{if(this._settings.multiDate){const t=e.split(this._settings.multiSeparator).map(t=>n.fromFormat(this._settings.format,t,this._dateOptions));t.find(t=>!t.isValid)||this._setDates(t)}else{const t=n.fromFormat(this._settings.format,e,this._dateOptions);t.isValid&&this._setDate(t)}}catch(t){}}),s.addEvent(this._node,"focus.frost.datetimepicker",t=>{this.show()}),!this._settings.keyDown||this._settings.inline||this._settings.multiDate||s.addEvent(this._node,"keydown.frost.datetimepicker",t=>{this._settings.keyDown(t,this)}),s.addEvent(this._container,"click.frost.datetimepicker mousedown.frost.datetimepicker",t=>{t.preventDefault(),t.stopPropagation()}),s.addEventDelegate(this._container,"click.frost.datetimepicker","[data-action]",t=>{const e=t.currentTarget,i=s.getDataset(e,"action"),a=this._date?this._date.clone():this._now();switch(i){case"setDate":a.setYear(s.getDataset(e,"year"),s.getDataset(e,"month"),s.getDataset(e,"date")),this._setDate(a),this._hasTime||this._settings.keepOpen||this.hide();break;case"setDateMulti":a.setYear(s.getDataset(e,"year"),s.getDataset(e,"month"),s.getDataset(e,"date")),this._isCurrent(a)?this._dates=this._dates.filter(t=>!t.isSame(a,"day")):this._dates.push(a),this._setDates(this._dates),this._viewDate=a.clone();break;case"nextTime":case"prevTime":const t="prevTime"===i?"sub":"add",n=s.getDataset(e,"unit");a[t]("hours"===n?this._settings.stepping:1,n),this._setDate(a);break;case"togglePeriod":const r=a.getHours();a.setHours(r+(r<12?12:-12)),this._setDate(a);break;case"setHours":a.setHours(s.getDataset(e,"hour")),this._timeViewMode=null,this._setDate(a);break;case"setMinutes":a.setMinutes(s.getDataset(e,"minute")),this._timeViewMode=null,this._setDate(a);break;case"setSeconds":a.setSeconds(s.getDataset(e,"second")),this._timeViewMode=null,this._setDate(a);break;case"changeView":this._viewMode=s.getDataset(e,"view"),s.hasDataset(e,"year")&&this._viewDate.setYear(s.getDataset(e,"year"),s.getDataset(e,"month")||1,s.getDataset(e,"date")||1),this._refreshDate();break;case"changeTimeView":this._timeViewMode=s.getDataset(e,"timeView"),this._refreshTime();break;case"showTime":s.setStyle(this._timeContainer,"display",""),s.squeezeIn(this._timeContainer,{duration:100}),s.squeezeOut(this._dateContainer,{duration:100}).then(t=>{s.setStyle(this._dateContainer,"display","none",!0)});break;case"showDate":s.setStyle(this._dateContainer,"display",""),s.squeezeIn(this._dateContainer,{duration:100}),s.squeezeOut(this._timeContainer,{duration:100}).then(t=>{s.setStyle(this._timeContainer,"display","none",!0)});break;case"next":case"prev":const d="prev"===i?"sub":"add";this._viewDate[d](s.getDataset(e,"amount")||1,s.getDataset(e,"unit")),this._refreshDate()}})}}),s.addEvent(r,"click.frost.datetimepicker",t=>{d.autoHide(t.target)}),s.addEvent(r,"keyup.frost.datetimepicker",t=>{switch(t.key){case"Tab":d.autoHide(t.target);case"Escape":d.autoHide()}}),Object.assign(d.prototype,{_checkFormat(){const t=this._settings.format.matchAll(this.constructor._formatTokenRegExp);for(const e of t)e[1]&&(!this._hasDate&&this.constructor._dateTokenRegExp.test(e[1])&&(this._hasDate=!0),!this._hasHours&&this.constructor._hourTokenRegExp.test(e[1])&&(this._hasHours=!0),!this._hasMinutes&&this.constructor._minuteTokenRegExp.test(e[1])&&(this._hasMinutes=!0),!this._hasSeconds&&this.constructor._secondTokenRegExp.test(e[1])&&(this._hasSeconds=!0));if(this._hasTime=this._hasHours||this._hasMinutes||this._hasSeconds,this._settings.multiDate&&this._hasTime)throw new Error("Time components cannot be used with multiDate option.");if(this._settings.multiDate&&!this._hasDate)throw new Error("Date components must be used with multiDate option.")},_clampStepping(t){const s=t.getMinutes(),i=Math.min(e.toStep(s,this._settings.stepping),60);s!==i&&t.setMinutes(i),this._settings.stepping>1&&t.setSeconds(0)},_isCurrent(t,e="day"){return this._settings.multiDate?this._dates.find(t=>t.isSame(t,e)):this._date&&this._date.isSame(t,e)},_isDateBetweenMinMax(t,e="second"){return(!this._minDate||!t.isBefore(this._minDate,e))&&(!this._maxDate||!t.isAfter(this._maxDate,e))},_isDateOutsideDisabledInterval(t){return!this._disabledTimeIntervals||!this._disabledTimeIntervals.find(([e,s])=>t.isAfter(e)&&t.isBefore(s))},_isDateValid(t){return(!this._disabledDates||!this._disabledDates.find(e=>e.isSame(t,"day")))&&!(this._enabledDates&&!this._enabledDates.find(e=>e.isSame(t,"day")))},_isDayValid(t){return!this._disabledDays||!this._disabledDays.includes(t.getDay())},_isHourValid(t){return!this._disabledHours||!this._disabledHours.includes(t.getHour())},_isValid(t,e="day"){return!!this._isDateBetweenMinMax(t,e)&&(!!this._isDayValid(t)&&(!!this._isDateValid(t)&&(!!["year","month","day"].includes(e)||!!this._isHourValid(t)&&!!this._isDateOutsideDisabledInterval(t))))},_now(){return n.now(this._dateOptions)},_parseDate(t){if(!t)return null;if(t instanceof n)return n.fromTimestamp(t.getTimestamp(),this._dateOptions);if(e.isString(t))try{return n.fromFormat(this._settings.format,t,this._dateOptions)}catch(e){return new n(t,this._dateOptions)}return t instanceof Date?n.fromDate(t,this._dateOptions):e.isNumber(t)?n.fromTimestamp(t,this._dateOptions):e.isArray(t)?n.fromArray(t,this._dateOptions):null},_parseDates(t){return t?t.map(t=>this._parseDate(t)).filter(t=>!!t):null},_parseSettings(){switch(this._settings.minView){case"years":this._viewMode="years";break;case"months":this._viewMode="months";break;default:this._viewMode="days"}const t=s.getValue(this._node);t&&(this._date=n.fromFormat(this._settings.format,t,this._dateOptions)),!this._date&&this._settings.defaultDate&&(this._date=this._parseDate(this._settings.defaultDate)),!this._date&&this._settings.useCurrent&&(this._date=this._now()),this._settings.multiDate&&this._date&&(this._dates.push(this._date),this._date=null),this._settings.minDate&&(this._minDate=this._parseDate(this._settings.minDate)),this._settings.maxDate&&(this._maxDate=this._parseDate(this._settings.maxDate)),this._settings.enabledDates?this._enabledDates=this._parseDates(this._settings.enabledDates):this._settings.disabledDates&&(this._disabledDates=this._parseDates(this._settings.disabledDates)),this._settings.disabledDays&&(this._disabledDays=this._settings.disabledDays),this._settings.disabledHours&&(this._disabledHours=this._settings.disabledHours),this._settings.disabledTimeIntervals&&(this._disabledTimeIntervals=this._settings.disabledTimeIntervals.map(t=>this._parseDates(t)).filter(t=>t&&2===t.length)),this._settings.viewDate&&(this._viewDate=this._parseDate(this._settings.viewDate)),!this._settings.viewDate&&this._date&&(this._viewDate=this._date.clone()),this._settings.viewDate||(this._viewDate=this._now())},_setDate(t){t&&(this._clampStepping(t),this._viewDate=t.clone()),t&&this._isValid(t,"second"),s.triggerEvent(this._node,"update.frost.datetimepicker",{old:this._date?this._date.clone():null,new:t?t.clone():null}),this._date=t,this._update(),this.refresh()},_setDates(t){for(const e of t)this._clampStepping(e);(t=t.sort((t,e)=>t.isBefore(e)?-1:1)).find(t=>!this._isValid(t,"second")),s.triggerEvent(this._node,"update.frost.datetimepicker",{old:this._dates.map(t=>t.clone()),new:t.map(t=>t.clone())}),this._dates=t,this._update(),this.refresh()},_update(){let t="";return this._settings.multiDate?t=this._dates.map(t=>t.format(this._settings.format)).join(this._settings.multiSeparator):this._date&&(t=this._date.format(this._settings.format)),s.setValue(this._node,t),this}}),Object.assign(d.prototype,{refresh(){this._hasDate&&this._refreshDate(),this._hasTime&&this._refreshTime()},_createTable(t){const e=s.create("table",{class:"table table-sm text-center m-0"});if(t.borderless&&s.addClass(e,"table-borderless"),t.header){const i=s.create("thead");s.append(e,i);const a=s.create("tr");s.append(i,a);const n=s.create("td",{html:`<span class="${this._settings.icons.left}"></span>`,class:"action text-primary fw-bold"});t.header.prev?(s.setDataset(n,t.header.prev.data),s.setAttribute(n,t.header.prev.attr)):s.addClass(n,"disabled"),s.append(a,n);const r=s.create("td",{class:"fw-bold",text:t.header.title,attributes:{colspan:5,...t.header.attr},dataset:t.header.data});s.append(a,r),t.header.data&&s.addClass(r,"action"),t.header.wide&&s.addClass(r,"w-100");const d=s.create("td",{html:`<span class="${this._settings.icons.right}"></span>`,class:"action text-primary fw-bold"});t.header.next?(s.setDataset(d,t.header.next.data),s.setAttribute(d,t.header.next.attr)):s.addClass(d,"disabled"),s.append(a,d),t.head&&t.head(i)}const i=s.create("tbody");return s.append(e,i),t.body(i),e},_refreshDate(){switch(s.empty(this._dateContainer),this._viewMode){case"years":this._renderYears();break;case"months":this._renderMonths();break;case"days":this._renderDays()}if(!this._settings.sideBySide&&this._hasDate){const t=this._createTable({body:t=>{const e=s.create("tr");s.append(t,e);const i=s.create("td",{html:'<span. class="icon-clock"></>',class:"action py-2",attributes:{colspan:7,title:this._settings.tooltips.selectTime},dataset:{action:"showTime"}});s.append(e,i)}});s.append(this._dateContainer,t)}},_refreshTime(){if(s.empty(this._timeContainer),!this._settings.sideBySide&&this._hasTime){const t=this._createTable({body:t=>{const e=s.create("tr");s.append(t,e);const i=s.create("td",{html:'<span class="icon-calendar"></span>',class:"action py-2",attributes:{colspan:4,title:this._settings.tooltips.selectDate},dataset:{action:"showDate"}});s.append(e,i)}});s.append(this._timeContainer,t)}switch(this._timeViewMode){case"hours":this._renderHours();break;case"minutes":this._renderMinutes();break;case"seconds":this._renderSeconds();break;default:this._renderTime()}},_render(){this._menuNode=s.create("div",{class:"datetimepicker",dataset:{trigger:"#"+s.getAttribute(this._node,"id")}}),this._container=s.create("div",{class:"row row-cols-1 gy-0 gx-2"}),s.append(this._menuNode,this._container),this._hasDate&&(this._dateContainer=s.create("div",{class:"col d-flex flex-column align-items-center"}),s.append(this._container,this._dateContainer),this._refreshDate()),this._hasTime&&(this._timeContainer=s.create("div",{class:"col d-flex flex-column align-items-center"}),s.append(this._container,this._timeContainer),this._refreshTime()),this._hasDate&&this._hasTime&&(this._settings.sideBySide?(s.addClass(this._menuNode,"datetimepicker-full"),s.addClass(this._container,"row-cols-md-2")):s.setStyle(this._timeContainer,"display","none",!0)),this._settings.inline?(s.addClass(this._menuNode,"datetimepicker-inline"),s.after(this._node,this._menuNode),s.hide(this._node)):(s.addClass(this._menuNode,"shadow-sm"),this._popper=new a.Popper(this._menuNode,{reference:this._node,placement:this._settings.placement,position:this._settings.position,fixed:this._settings.fixed,spacing:this._settings.spacing,minContact:this._settings.minContact}))},_renderDays(){const t=this._viewDate.clone().startOf("month"),e=this._viewDate.clone().endOf("month"),i=t.clone().startOf("week"),a=e.clone().endOf("week");t.sub(1,"second"),e.add(1,"second");const n=this._createTable({header:{title:this._viewDate.format("MMMM yyyy"),data:{action:"changeView",view:"months"},attr:{title:this._settings.tooltips.selectMonth},prev:!!this._isDateBetweenMinMax(t)&&{data:{action:"prev",unit:"month"},attr:{title:this._settings.tooltips.prevMonth}},next:!!this._isDateBetweenMinMax(e)&&{data:{action:"next",unit:"month"},attr:{title:this._settings.tooltips.nextMonth}}},head:t=>{const e=s.create("tr");s.append(t,e);const a=i.clone();for(let t=1;t<=7;t++){a.setWeekDay(t);const i=s.create("th",{class:"fw-bold",text:a.dayName("narrow")});s.append(e,i)}},body:t=>{let e;const n=this._now();for(;i.isSameOrBefore(a,"day");){1===i.getWeekDay()&&(e=s.create("tr"),s.append(t,e));const a=s.create("td",{text:i.format("dd")});s.append(e,a),this._isCurrent(i,"day")?s.addClass(a,"active"):this._viewDate.isSame(i,"month")||s.addClass(a,"text-secondary"),this._isValid(i,"day")?(s.addClass(a,"action"),s.setDataset(a,{action:this._settings.multiDate?"setDateMulti":"setDate",year:i.getYear(),month:i.getMonth(),date:i.getDate()})):s.addClass(a,"disabled"),n.isSame(i,"day")&&s.addClass(a,"today"),this._settings.renderDay&&this._settings.renderDay(i.clone(),a),i.add(1,"day")}}});s.append(this._dateContainer,n)},_renderHours(){const t=this._date?this._date:this._now(),e=t.clone().startOf("day"),i=t.clone().endOf("day"),a=this._createTable({borderless:!0,body:t=>{const a=s.create("tr");s.append(t,a);const n=s.create("td",{class:"p-0",attributes:{colspan:7}});s.append(a,n);const r=s.create("div",{class:"row g-0"});for(s.append(n,r);e.isSameOrBefore(i,"hour");){const t=s.create("div",{text:e.format("HH"),class:"col-3 px-1 py-2"});s.append(r,t),this._isValid(e,"second")?(s.addClass(t,"action"),s.setDataset(t,{action:"setHours",hour:e.getHours()})):s.addClass(t,"disabled"),this._settings.renderHour&&this._settings.renderHour(e.clone(),t),e.add(1,"hour")}}});s.append(this._timeContainer,a)},_renderMinutes(){const t=this._date?this._date:this._now(),e=t.clone().startOf("hour"),i=t.clone().endOf("hour"),a=this._createTable({borderless:!0,body:t=>{const a=s.create("tr");s.append(t,a);const n=s.create("td",{class:"p-0",attributes:{colspan:7}});s.append(a,n);const r=s.create("div",{class:"row g-0"});s.append(n,r);const d=1==this._settings.stepping?5:this._settings.stepping;for(;e.isSameOrBefore(i,"minute");){const t=s.create("span",{text:e.format("mm"),class:"col-3 px-1 py-2"});s.append(r,t),this._isValid(e,"second")?(s.addClass(t,"action"),s.setDataset(t,{action:"setMinutes",minute:e.getMinutes()})):s.addClass(t,"disabled"),this._settings.renderMinute&&this._settings.renderMinute(e.clone(),t),e.add(d,"minutes")}}});s.append(this._timeContainer,a)},_renderMonths(){const t=this._viewDate.clone().startOf("year"),e=this._viewDate.clone().endOf("year"),i=t.clone(),a=e.clone();t.sub(1,"second"),e.add(1,"second");const n=this._createTable({header:{title:this._viewDate.format("yyyy"),wide:!0,data:{action:"changeView",view:"years"},attr:{title:this._settings.tooltips.selectYear},prev:!!this._isDateBetweenMinMax(t)&&{data:{action:"prev",unit:"year"},attr:{title:this._settings.tooltips.prevYear}},next:!!this._isDateBetweenMinMax(e)&&{data:{action:"next",unit:"year"},attr:{title:this._settings.tooltips.nextYear}}},body:t=>{const e=s.create("tr");s.append(t,e);const n=s.create("td",{class:"p-0",attributes:{colspan:7}});s.append(e,n);const r=s.create("div",{class:"row g-0"});for(s.append(n,r);i.isSameOrBefore(a,"month");){const t=s.create("div",{text:i.format("MMM"),class:"col-4 px-1 py-2"});s.append(r,t),this._isCurrent(i,"month")&&s.addClass(t,"active"),this._isDateBetweenMinMax(i,"month")?(s.addClass(t,"action"),"year"===this._settings.minView?s.setDataset(t,{action:this._settings.multiDate?"setDateMulti":"setDate",year:i.getYear(),month:i.getMonth()}):s.setDataset(t,{action:"changeView",view:"days",year:i.getYear(),month:i.getMonth()})):s.addClass(t,"disabled"),this._settings.renderMonth&&this._settings.renderMonth(i.clone(),t),i.add(1,"month")}}});s.append(this._dateContainer,n)},_renderSeconds(){const t=this._date?this._date:this._now(),e=t.clone().startOf("minute"),i=t.clone().endOf("minute"),a=this._createTable({borderless:!0,body:t=>{const a=s.create("tr");s.append(t,a);const n=s.create("td",{class:"p-0",attributes:{colspan:7}});s.append(a,n);const r=s.create("div",{class:"row g-0"});for(s.append(n,r);e.isSameOrBefore(i,"second");){const t=s.create("span",{text:e.format("ss"),class:"col-3 px-1 py-2"});s.append(r,t),this._isValid(e,"second")?(s.addClass(t,"action"),s.setDataset(t,{action:"setSeconds",second:e.getSeconds()})):s.addClass(t,"disabled"),this._settings.renderSecond&&this._settings.renderSecond(e.clone(),t),e.add(5,"seconds")}}});s.append(this._timeContainer,a)},_renderTime(){const t=this._date?this._date:this._now(),e=this._createTable({borderless:!0,body:e=>{const i=(100-3*(this._hasHours+this._hasMinutes+this._hasSeconds-1))/(this._hasHours+this._hasMinutes+this._hasSeconds+this._useDayPeriod),a=s.create("tr");s.append(e,a);const n=s.create("tr");s.append(e,n);const r=s.create("tr");if(s.append(e,r),this._hasHours){const e=s.create("td",{html:`<span class="${this._settings.icons.up}"></span>`,class:"text-primary bw-bold py-4 px-0",style:{width:i+"%"}}),d=t.clone().add(1,"hour");this._isValid(d,"second")?(s.addClass(e,"action"),s.setDataset(e,{action:"nextTime",unit:"hour"}),s.setAttribute(e,"title",this._settings.tooltips.incrementHour)):s.addClass(e,"disabled"),s.append(a,e);const o=s.create("td",{text:t.format(this._useDayPeriod?"hh":"HH"),class:"action time py-2 px-0",dataset:{action:"changeTimeView",timeView:"hours"},attributes:{title:this._settings.tooltips.selectHour}});s.append(n,o);const h=s.create("td",{html:`<span class="${this._settings.icons.down}"></span>`,class:"text-primary bw-bold py-4 px-0"}),c=t.clone().sub(1,"hour");this._isValid(c,"second")?(s.addClass(h,"action"),s.setDataset(h,{action:"prevTime",unit:"hour"}),s.setAttribute(h,"title",this._settings.tooltips.decrementHour)):s.addClass(h,"disabled"),s.append(r,h)}if(this._hasHours&&this._hasMinutes){const t=s.create("td",{style:{width:"3%"}});s.append(a,t);const e=s.create("td",{text:":",class:"time py-2"});s.append(n,e);const i=s.create("td");s.append(r,i)}if(this._hasMinutes){const e=s.create("td",{html:`<span class="${this._settings.icons.up}"></span>`,class:"text-primary bw-bold py-4 px-0",style:{width:i+"%"}}),d=t.getMinutes(),o=Math.min(d+this._settings.stepping,60),h=t.clone().setMinutes(o);this._isValid(h,"second")?(s.addClass(e,"action"),s.setDataset(e,{action:"nextTime",unit:"minute"}),s.setAttribute(e,"title",this._settings.tooltips.incrementMinute)):s.addClass(e,"disabled"),s.append(a,e);const c=s.create("td",{text:t.format("mm"),class:"action time py-2 px-0",dataset:{action:"changeTimeView",timeView:"minutes"},attributes:{title:this._settings.tooltips.selectMinute}});s.append(n,c);const l=s.create("td",{html:`<span class="${this._settings.icons.down}"></span>`,class:"action text-primary bw-bold py-4 px-0"}),_=t.clone().sub(this._settings.stepping,"minute");this._isValid(_,"second")?(s.addClass(l,"action"),s.setDataset(l,{action:"prevTime",unit:"minute"}),s.setAttribute(l,"title",this._settings.tooltips.decrementMinute)):s.addClass(l,"disabled"),s.append(r,l)}if((this._hasHours||this._hasMinutes)&&this._hasSeconds){const t=s.create("td",{style:{width:"3%"}});s.append(a,t);const e=s.create("td",{text:":",class:"time py-2"});s.append(n,e);const i=s.create("td");s.append(r,i)}if(this._hasSeconds){const e=s.create("td",{html:`<span class="${this._settings.icons.up}"></span>`,class:"text-primary bw-bold py-4 px-0",style:{width:i+"%"}}),d=t.clone().add(1,"second");this._isValid(d,"second")?(s.addClass(e,"action"),s.setDataset(e,{action:"nextTime",unit:"second"}),s.setAttribute(e,"title",this._settings.tooltips.incrementSecond)):s.addClass(e,"disabled"),s.append(a,e);const o=s.create("td",{text:t.format("ss"),class:"action time py-2 px-0",dataset:{action:"changeTimeView",timeView:"seconds"},attributes:{title:this._settings.tooltips.selectSecond}});s.append(n,o);const h=s.create("td",{html:`<span class="${this._settings.icons.down}"></span>`,class:"action text-primary bw-bold py-4 px-0"}),c=t.clone().sub(1,"second");this._isValid(c,"second")?(s.addClass(h,"action"),s.setDataset(h,{action:"prevTime",unit:"second"}),s.setAttribute(h,"title",this._settings.tooltips.decrementSecond)):s.addClass(h,"disabled"),s.append(r,h)}if(this._useDayPeriod){const e=s.create("td",{style:{width:"22%"}});s.append(a,e);const i=s.create("td");s.append(n,i);const d=s.create("span",{text:t.format("aa").toUpperCase(),class:"btn btn-primary d-block"}),o=t.getHours(),h=t.clone().setHours(o+(o<12?12:-12));this._isValid(h,"second")?(s.setDataset(d,{action:"togglePeriod"}),s.setAttribute(d,"title",this._settings.tooltips.togglePeriod)):s.addClass(d,"disabled"),s.append(i,d);const c=s.create("td");s.append(r,c)}}});s.append(this._timeContainer,e)},_renderYears(){const t=this._viewDate.clone().startOf("year"),e=this._viewDate.clone().endOf("year"),i=t.getYear(),a=i-i%10,n=a+9;t.setYear(a),e.setYear(n);const r=t.clone().sub(1,"year"),d=e.clone().add(1,"year");t.sub(1,"second"),e.add(1,"second");const o=this._createTable({header:{title:`${t.format("yyyy")} - ${e.format("yyyy")}`,wide:!0,prev:!!this._isDateBetweenMinMax(t)&&{data:{action:"prev",unit:"years",amount:10},attr:{title:this._settings.tooltips.prevDecade}},next:!!this._isDateBetweenMinMax(e)&&{data:{action:"next",unit:"years",amount:10},attr:{title:this._settings.tooltips.nextDecade}}},body:t=>{const e=s.create("tr");s.append(t,e);const i=s.create("td",{class:"p-0",attributes:{colspan:7}});s.append(e,i);const o=s.create("div",{class:"row g-0"});for(s.append(i,o);r.isSameOrBefore(d,"month");){const t=r.getYear(),e=s.create("div",{text:r.format("yyyy"),class:"col-4 px-1 py-2"});s.append(o,e),this._isCurrent(r,"year")?s.addClass(e,"active"):(t<a||t>n)&&s.addClass(e,"text-secondary"),this._isDateBetweenMinMax(r,"year")?(s.addClass(e,"action"),"decade"===this._settings.minView?s.setDataset(e,{action:this._settings.multiDate?"setDateMulti":"setDate",year:t}):s.setDataset(e,{action:"changeView",view:"months",year:t})):s.addClass(e,"disabled"),this._settings.renderYear&&this._settings.renderYear(r.clone(),e),r.add(1,"year")}}});s.append(this._dateContainer,o)}}),Object.assign(d,{checkDayPeriod(t){if(!(t in this._dayPeriods)){const e=new Intl.DateTimeFormat(t,{hour:"2-digit"});this._dayPeriods[t]=!!e.formatToParts(new Date).find(t=>"dayPeriod"===t.type)}return this._dayPeriods[t]},getDefaultDateFormat(t){return t in this._defaultDateFormats||(this._defaultDateFormats[t]=this._formatFromParts(t,{year:"numeric",month:"2-digit",day:"2-digit"})),this._defaultDateFormats[t]},getDefaultFormat(t,e){return t in this._defaultFormats||(this._defaultFormats[t]=this._formatFromParts(t,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"},e)),this._defaultFormats[t]},_formatFromParts:(t,e,s)=>new Intl.DateTimeFormat(t,e).formatToParts(new Date).map(t=>{switch(t.type){case"year":return"yyyy";case"month":return"MM";case"day":return"dd";case"hour":return s?"hh":"HH";case"minute":return"mm";case"dayPeriod":return"a"}return", "===t.value?" ":/[a-z]/i.test(t.value)?`'${t.value}'`:t.value}).join("")}),Object.assign(d.prototype,{getDate(){return this._settings.multiDate?this._dates:this._date?this._date.clone():null},getDisabledDates(){return this._disabledDates?this._disabledDates.map(t=>t.clone()):null},getDisabledDays(){return this._disabledDays?this._disabledDays.slice():null},getDisabledHours(){return this._disabledHours?this._disabledHours.slice():null},getDisabledTimeIntervals(){return this._disabledTimeIntervals?this._disabledTimeIntervals.map(t=>t.map(t=>t.clone())):null},getEnabledDates(){return this._enabledDates?this._enabledDates.map(t=>t.clone()):null},getViewDate(){return this._viewDate.clone()},setDate(t){return t=this._settings.multiDate?this._parseDates(t):this._parseDate(t),this._setDate(t),this},setDisabledDates(t){return this._disabledDates=this._parseDates(t),this._enabledDates=null,this._update(),this.refresh(),this},setDisabledDays(t){return this._disabledDays=t,this._update(),this.refresh(),this},setDisabledHours(t){return this._disabledHours=t,this._update(),this.refresh(),this},setDisabledTimeIntervals(t){return this._disabledTimeIntervals=t.map(t=>this._parseDates(t)).filter(t=>t&&2===t.length),this._update(),this.refresh(),this},setEnabledDates(t){return this._enabledDates=this._parseDates(t),this._disabledDates=null,this._update(),this.refresh(),this},setMaxDate(t){return this._maxDate=this._parseDate(t),this._update(),this.refresh(),this},setMinDate(t){return this._minDate=this._parseDate(t),this._update(),this.refresh(),this},setViewDate(t){return this._viewDate=this._parseDate(t),this.refresh(),this}}),d.defaults={format:null,locale:DateFormatter.defaultLocale,timeZone:n.defaultTimeZone,defaultDate:null,minDate:null,maxDate:null,enabledDates:null,disabledDates:null,enabledDays:null,disabledDays:null,enabledHours:null,disabledHours:null,disabledTimeIntervals:null,multiDate:!1,multiDateSeparator:",",icons:{up:"icon-arrow-up",right:"icon-arrow-right",down:"icon-arrow-down",left:"icon-arrow-left"},tooltips:{decrementHour:"Decrement Hour",decrementMinute:"Decrement Minute",decrementSecond:"Decrement Second",incrementHour:"Increment Hour",incrementMinute:"Increment Minute",incrementSecond:"Increment Second",nextDecade:"Next Decade",nextMonth:"Next Month",nextYear:"Next Year",prevDecade:"Previous Decade",prevMonth:"Previous Month",prevYear:"Previous Year",selectDate:"Select Date",selectHour:"Select Hour",selectMinute:"Select Minute",selectMonth:"Select Month",selectSecond:"Select Second",selectTime:"Select Time",selectYear:"Select Year",togglePeriod:"Toggle Period"},keyDown:(t,e)=>{let s=e._date?e._date:e._now();switch(t.key){case"ArrowUp":t.ctrlKey?s.sub(1,"year"):s.sub(7,"days");break;case"ArrowDown":t.ctrlKey?s.add(1,"year"):s.add(7,"days");break;case"ArrowRight":t.ctrlKey?s.add(1,"month"):s.add(1,"day");break;case"ArrowLeft":t.ctrlKey?s.sub(1,"month"):s.sub(1,"day");break;case"PageUp":s.add(1,"hour");break;case"PageDown":s.sub(1,"hour");break;case"Home":s=e._now();break;case"Delete":s=null;break;default:return}t.preventDefault(),e._setDate(s)},renderDay:null,renderHour:null,renderMinute:null,renderMonth:null,renderSecond:null,renderYear:null,useCurrent:!1,keepOpen:!1,focusOnShow:!1,minView:null,inline:!1,sideBySide:!1,keepInvalid:!1,stepping:1,duration:100,placement:"bottom",position:"start",fixed:!1,spacing:3,minContact:!1},d._formatTokenRegExp=/([a-z])\1*|'[^']*'/gi,d._dateTokenRegExp=/[GyYqQMLwWdDFEec]/,d._hourTokenRegExp=/[hHKk]/,d._minuteTokenRegExp=/[m]/,d._secondTokenRegExp=/[s]/,d._dayPeriods={},d._defaultDateFormats={},d._defaultFormats={},i&&(i.prototype.dateTimePicker=function(t,...s){let i,a;e.isObject(t)?i=t:e.isString(t)&&(a=t);for(const t of this){if(!e.isElement(t))continue;const n=d.init(t,i);a&&n[a](...s)}return this}),a.DateTimePicker=d}));