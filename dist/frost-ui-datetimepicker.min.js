!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e:e(t)}(window,(function(t){"use strict";if(!t)throw new Error("FrostUI-DateTimePicker requires a Window.");if(!("UI"in t))throw new Error("FrostUI-DateTimePicker requires FrostUI.");if(!("DateTime"in t))throw new Error("FrostUI-DateTimePicker requires FrostDateTime.");const e=t.Core,s=t.dom,a=t.QuerySet,i=t.UI,n=t.DateTime,r=t.document;class d{constructor(t,a){if(this._node=t,this._settings=e.extend({},this.constructor.defaults,s.getDataset(this._node),a),this._useDayPeriod=this.constructor.checkDayPeriod(this._settings.locale),this._settings.format||(this._settings.format=this._settings.multiDate?this.constructor.getDefaultDateFormat(this._settings.locale,this._useDayPeriod):this.constructor.getDefaultFormat(this._settings.locale,this._useDayPeriod)),this._checkFormat(),this._settings.multiDate&&this._hasTime)throw new Error("Time components cannot be used with multiDate option.");if(this._settings.multiDate&&!this._hasDate)throw new Error("Date components must be used with multiDate option.");switch(this._dateOptions={locale:this._settings.locale,timeZone:this._settings.timeZone},this._currentDate=null,this._dates=[],this._minDate=null,this._maxDate=null,this._enabledDates=null,this._disabledDates=null,this._disabledDays=null,this._disabledHours=null,this._disabledTimeIntervals=null,this._timeViewMode=null,this._settings.minView){case"decade":this._viewMode="decade";break;case"year":this._viewMode="year";break;default:this._viewMode="month"}this._now=n.now(this._dateOptions);const i=s.getValue(this._node);i&&(this._currentDate=n.fromFormat(this._settings.format,i,this._dateOptions)),!this._currentDate&&this._settings.defaultDate&&(this._currentDate=this._parseDate(this._settings.defaultDate)),!this._currentDate&&this._settings.useCurrent&&(this._currentDate=this._now.clone()),this._settings.multiDate&&this._currentDate&&(this._dates.push(this._currentDate),this._currentDate=null),this._settings.minDate&&(this._minDate=this._parseDate(this._settings.minDate)),this._settings.maxDate&&(this._maxDate=this._parseDate(this._settings.maxDate)),this._settings.enabledDates?this._enabledDates=this._parseDates(this._settings.enabledDates):this._settings.disabledDates&&(this._disabledDates=this._parseDates(this._settings.disabledDates)),this._settings.disabledDays&&(this._disabledDays=this._settings.disabledDays),this._settings.disabledHours&&(this._disabledHours=this._settings.disabledHours),this._settings.disabledTimeIntervals&&(this._disabledTimeIntervals=this._settings.disabledTimeIntervals.map(t=>this._parseDates(t)).filter(t=>2===t.length)),this._settings.viewDate&&(this._viewDate=this._parseDate(this._settings.viewDate)),!this._settings.viewDate&&this._currentDate&&(this._viewDate=this._currentDate.clone()),this._settings.viewDate||(this._viewDate=this._now.clone()),this.update(),this._render(),this._events(),s.setData(this._node,"datetimepicker",this)}destroy(){s.removeData(this._node,"dropdown")}hide(){!this._settings.inline&&!this._animating&&s.isConnected(this._menuNode)&&s.triggerOne(this._node,"hide.frost.datetimepicker")&&(this._animating=!0,s.fadeOut(this._menuNode,{duration:this._settings.duration}).then(t=>{s.detach(this._menuNode),s.setAttribute(this._node,"aria-expanded",!1),s.triggerEvent(this._node,"hidden.frost.datetimepicker")}).catch(t=>{}).finally(t=>{this._animating=!1}))}show(){this._settings.inline||this._animating||s.isConnected(this._menuNode)||!s.triggerOne(this._node,"show.frost.datetimepicker")||(this._animating=!0,s.append(r.body,this._menuNode),this._popper.update(),s.fadeIn(this._menuNode,{duration:this._settings.duration}).then(t=>{s.setAttribute(this._node,"aria-expanded",!0),s.triggerEvent(this._node,"shown.frost.datetimepicker"),this._settings.focusOnShow&&s.focus(this._node)}).catch(t=>{}).finally(t=>{this._animating=!1}))}toggle(){s.hasClass(this._menuNode,"show")?this.hide():this.show()}static autoHide(t){const e=s.find(".datetimepicker:not(.datetimepicker-inline)");for(const a of e){const e=s.getDataset(a,"trigger"),i=s.findOne(e);if(i===t)continue;this.init(i).hide()}}static init(t,e){return s.hasData(t,"datetimepicker")?s.getData(t,"datetimepicker"):new this(t,e)}}Object.assign(d.prototype,{_events(){s.addEvent(this._node,"focus",t=>{this.show()}),!this._settings.keyDown||this._settings.inline||this._settings.multiDate||s.addEvent(this._node,"keydown",t=>{this._settings.keyDown.bind(this)(t)}),s.addEvent(this._container,"click mousedown",t=>{t.preventDefault(),t.stopPropagation()}),s.addEventDelegate(this._container,"click","[data-action]",t=>{const e=t.currentTarget,a=s.getDataset(e,"action"),i=!!this._currentDate;switch(a){case"setDate":i||(this._currentDate=this._now.clone()),this._currentDate.setYear(s.getDataset(e,"year"),s.getDataset(e,"month"),s.getDataset(e,"date")),this._viewDate=this._currentDate.clone(),this._refreshDate(),i||this._refreshTime(),this.update(),this._hasTime||this._settings.keepOpen||this.hide();break;case"setDateMulti":let t=this._now.clone().setYear(s.getDataset(e,"year"),s.getDataset(e,"month"),s.getDataset(e,"date"));this._viewDate=t.clone(),this._isCurrent(t)?this._dates=this._dates.filter(e=>!e.isSame(t,"day")):this._dates.push(t),this._refreshDate(),this.update(),console.log(this);break;case"nextTime":case"prevTime":this._currentDate||(this._currentDate=this._now.clone());const n="prevTime"===a?"sub":"add",r=s.getDataset(e,"unit"),d=this._currentDate.getDay();this._currentDate[n]("hours"===r?this._settings.stepping:1,r),i&&d===this._currentDate.getDay()||this._refreshDate(),this._refreshTime(),this.update();break;case"togglePeriod":this._currentDate||(this._currentDate=this._now.clone());const o=this._currentDate.getHours();this._currentDate.setHours(o+(o<12?12:-12)),i||this._refreshDate(),this._refreshTime(),this.update();break;case"setHours":this._currentDate||(this._currentDate=this._now.clone()),this._currentDate.setHours(s.getDataset(e,"hour")),this._timeViewMode=null,i||this._refreshDate(),this._refreshTime(),this.update();break;case"setMinutes":this._currentDate||(this._currentDate=this._now.clone()),this._currentDate.setMinutes(s.getDataset(e,"minute")),this._timeViewMode=null,i||this._refreshDate(),this._refreshTime(),this.update();break;case"changeView":this._viewMode=s.getDataset(e,"view"),s.hasDataset(e,"year")&&this._viewDate.setYear(s.getDataset(e,"year"),s.getDataset(e,"month")||1,s.getDataset(e,"date")||1),this._refreshDate();break;case"changeTimeView":this._timeViewMode=s.getDataset(e,"timeView"),this._refreshTime();break;case"showTime":s.setStyle(this._timeContainer,"display",""),s.squeezeIn(this._timeContainer,{duration:100}),s.squeezeOut(this._dateContainer,{duration:100}).then(t=>{s.setStyle(this._dateContainer,"display","none",!0)});break;case"showDate":s.setStyle(this._dateContainer,"display",""),s.squeezeIn(this._dateContainer,{duration:100}),s.squeezeOut(this._timeContainer,{duration:100}).then(t=>{s.setStyle(this._timeContainer,"display","none",!0)});break;case"next":case"prev":const h="prev"===a?"sub":"add";this._viewDate[h](s.getDataset(e,"amount")||1,s.getDataset(e,"unit")),this._refreshDate()}})}}),s.addEvent(r,"click.frost.datetimepicker",t=>{d.autoHide(t.target)}),s.addEvent(r,"keyup.frost.datetimepicker",t=>{switch(t.key){case"Tab":d.autoHide(t.target,!0);case"Escape":d.autoHide()}}),Object.assign(d.prototype,{_checkFormat(){this._hasDate=!1,this._hasTime=!1;const t=this._settings.format.matchAll(this.constructor._formatTokenRegExp);for(const e of t)if(e[1]&&(!this._hasDate&&this.constructor._dateTokenRegExp.test(e[1])&&(this._hasDate=!0),!this._hasTime&&this.constructor._timeTokenRegExp.test(e[1])&&(this._hasTime=!0),this._hasDate&&this._hasTime))break},_dateString:t=>t.clone().setLocale("en").format("yyyy-MM-dd"),_isCurrent(t,e="day"){return this._settings.multiDate?this._dates.find(s=>s.isSame(t,e)):this._currentDate&&this._currentDate.isSame(t,e)},_isDateBetweenMinMax(t,e="second"){return(!this._minDate||!t.isBefore(this._minDate,e))&&(!this._maxDate||!t.isAfter(this._maxDate,e))},_isDateOutsideDisabledInterval(t){return!this._disabledTimeIntervals||!this._disabledTimeIntervals.find(([e,s])=>t.isAfter(e)&&t.isBefore(s))},_isDateValid(t){return(!this._disabledDates||!this._disabledDates.find(e=>e.isSame(t,"day")))&&!(this._enabledDates&&!this._enabledDates.find(e=>e.isSame(t,"day")))},_isDayValid(t){return!this._disabledDays||!this._disabledDays.includes(t.getDay())},_isHourValid(t){return!this._disabledHours||!this._disabledHours.includes(t.getHour())},_isValid(t,e="day"){return!!this._isDateBetweenMinMax(t,e)&&(!!this._isDayValid(t)&&(!!this._isDateValid(t)&&("day"===e||!!this._isHourValid(t)&&!!this._isDateOutsideDisabledInterval(t))))},_parseDate(t){if(!t)return t;if(t instanceof n)return n.fromTimestamp(t.getTimestamp(),this._dateOptions);if(e.isString(t))try{return n.fromFormat(this._settings.format,t,this._dateOptions)}catch(e){return new n(t,this._dateOptions)}return t instanceof Date?n.fromDate(t,this._dateOptions):e.isNumber(t)?n.fromTimestamp(t,this._dateOptions):e.isArray(t)?n.fromArray(t,this._dateOptions):null},_parseDates(t){return t?t.map(t=>this._parseDate(t)).filter(t=>!!t):null}}),Object.assign(d.prototype,{refresh(){this._hasDate&&this._refreshDate(),this._hasTime&&this._refreshTime()},_createTable(t){const e=s.create("table",{class:"table table-sm text-center m-0"});if(t.borderless&&s.addClass(e,"table-borderless"),t.header){const a=s.create("thead");s.append(e,a);const i=s.create("tr");s.append(a,i);const n=s.create("td",{html:`<span class="${this._settings.icons.left}"></span>`,class:"action text-primary fw-bold"});t.header.prev?(s.setDataset(n,t.header.prev.data),s.setAttribute(n,t.header.prev.attr)):s.addClass(n,"disabled"),s.append(i,n);const r=s.create("td",{class:"fw-bold",text:t.header.title,attributes:{colspan:5,...t.header.attr},dataset:t.header.data});s.append(i,r),t.header.data&&s.addClass(r,"action"),t.header.wide&&s.addClass(r,"w-100");const d=s.create("td",{html:`<span class="${this._settings.icons.right}"></span>`,class:"action text-primary fw-bold"});t.header.next?(s.setDataset(d,t.header.next.data),s.setAttribute(d,t.header.next.attr)):s.addClass(d,"disabled"),s.append(i,d),t.head&&t.head(a)}const a=s.create("tbody");return s.append(e,a),t.body(a),e},_refreshDate(){switch(s.empty(this._dateContainer),this._viewMode){case"decade":this._renderDecade();break;case"year":this._renderYear();break;case"month":this._renderMonth()}if(!this._settings.sideBySide&&this._hasDate){const t=this._createTable({body:t=>{const e=s.create("tr");s.append(t,e);const a=s.create("td",{html:'<span. class="icon-clock"></>',class:"action py-2",attributes:{colspan:7,title:this._settings.tooltips.selectTime},dataset:{action:"showTime"}});s.append(e,a)}});s.append(this._dateContainer,t)}},_refreshTime(){if(s.empty(this._timeContainer),!this._settings.sideBySide&&this._hasTime){const t=this._createTable({body:t=>{const e=s.create("tr");s.append(t,e);const a=s.create("td",{html:'<span class="icon-calendar"></span>',class:"action py-2",attributes:{colspan:4,title:this._settings.tooltips.selectDate},dataset:{action:"showDate"}});s.append(e,a)}});s.append(this._timeContainer,t)}switch(this._timeViewMode){case"day":this._renderDay();break;case"hour":this._renderHour();break;default:this._renderTime()}},_render(){this._menuNode=s.create("div",{class:"datetimepicker",dataset:{trigger:"#"+s.getAttribute(this._node,"id")}}),this._container=s.create("div",{class:"row row-cols-1 gy-0 gx-2"}),s.append(this._menuNode,this._container),this._hasDate&&(this._dateContainer=s.create("div",{class:"col d-flex flex-column align-items-center"}),s.append(this._container,this._dateContainer),this._refreshDate()),this._hasTime&&(this._timeContainer=s.create("div",{class:"col d-flex flex-column align-items-center"}),s.append(this._container,this._timeContainer),this._refreshTime()),this._hasDate&&this._hasTime&&(this._settings.sideBySide?(s.addClass(this._menuNode,"datetimepicker-full"),s.addClass(this._container,"row-cols-md-2")):s.setStyle(this._timeContainer,"display","none",!0)),this._settings.inline?(s.addClass(this._menuNode,"datetimepicker-inline"),s.after(this._node,this._menuNode),s.hide(this._node)):(s.addClass(this._menuNode,"shadow-sm"),this._popper=new i.Popper(this._menuNode,{reference:this._node,placement:this._settings.placement,position:this._settings.position,fixed:this._settings.fixed,spacing:this._settings.spacing,minContact:this._settings.minContact}))},_renderDay(){const t=this._currentDate?this._currentDate:this._now,e=t.clone().startOf("day"),a=t.clone().endOf("day"),i=this._createTable({borderless:!0,body:t=>{const i=s.create("tr");s.append(t,i);const n=s.create("td",{class:"p-0",attributes:{colspan:7}});s.append(i,n);const r=s.create("div",{class:"row"});for(s.append(n,r);e.isSameOrBefore(a,"hour");){const t=s.create("div",{text:e.format("HH"),class:"col-3 p-1"});s.append(r,t),this._isValid(e,"second")?(s.addClass(t,"action"),s.setDataset(t,{action:"setHours",hour:e.getHours()})):s.addClass(t,"disabled"),this._settings.renderHour&&this._settings.renderHour(e.clone(),t),e.add(1,"hour")}}});s.append(this._timeContainer,i)},_renderDecade(){const t=this._viewDate.clone().startOf("year"),e=this._viewDate.clone().endOf("year"),a=t.getYear(),i=a-a%10,n=i+9;t.setYear(i),e.setYear(n);const r=t.clone().sub(1,"year"),d=e.clone().add(1,"year");t.sub(1,"second"),e.add(1,"second");const o=this._createTable({header:{title:`${t.format("yyyy")} - ${e.format("yyyy")}`,wide:!0,prev:!!this._isDateBetweenMinMax(t)&&{data:{action:"prev",unit:"years",amount:10},attr:{title:this._settings.tooltips.prevDecade}},next:!!this._isDateBetweenMinMax(e)&&{data:{action:"next",unit:"years",amount:10},attr:{title:this._settings.tooltips.nextDecade}}},body:t=>{const e=s.create("tr");s.append(t,e);const a=s.create("td",{class:"p-0",attributes:{colspan:7}});s.append(e,a);const o=s.create("div",{class:"row g-0"});for(s.append(a,o);r.isSameOrBefore(d,"month");){const t=r.getYear(),e=s.create("div",{text:r.format("yyyy"),class:"col-4 px-1 py-3"});s.append(o,e),this._isCurrent(r,"year")?s.addClass(e,"active"):(t<i||t>n)&&s.addClass(e,"text-secondary"),this._isDateBetweenMinMax(r,"year")?(s.addClass(e,"action"),"decade"===this._settings.minView?s.setDataset(e,{action:this._settings.multiDate?"setDateMulti":"setDate",year:t}):s.setDataset(e,{action:"changeView",view:"year",year:t})):s.addClass(e,"disabled"),this._settings.renderYear&&this._settings.renderYear(r.clone(),e),r.add(1,"year")}}});s.append(this._dateContainer,o)},_renderHour(){const t=this._currentDate?this._currentDate:this._now,e=t.clone().startOf("hour"),a=t.clone().endOf("hour"),i=this._createTable({borderless:!0,body:t=>{const i=s.create("tr");s.append(t,i);const n=s.create("td",{class:"p-0",attributes:{colspan:7}});s.append(i,n);const r=s.create("div",{class:"row"});for(s.append(n,r);e.isSameOrBefore(a,"minute");){const t=s.create("span",{text:e.format("mm"),class:"col-3 p-1"});s.append(r,t),this._isValid(e,"second")?(s.addClass(t,"action"),s.setDataset(t,{action:"setMinutes",minute:e.getMinutes()})):s.addClass(t,"disabled"),this._settings.renderMinute&&this._settings.renderMinute(e.clone(),t),e.add(5,"minute")}}});s.append(this._timeContainer,i)},_renderMonth(){const t=this._viewDate.clone().startOf("month"),e=this._viewDate.clone().endOf("month"),a=t.clone().startOf("week"),i=e.clone().endOf("week");t.sub(1,"second"),e.add(1,"second");const n=this._createTable({header:{title:this._viewDate.format("MMMM yyyy"),data:{action:"changeView",view:"year"},attr:{title:this._settings.tooltips.selectMonth},prev:!!this._isDateBetweenMinMax(t)&&{data:{action:"prev",unit:"month"},attr:{title:this._settings.tooltips.prevMonth}},next:!!this._isDateBetweenMinMax(e)&&{data:{action:"next",unit:"month"},attr:{title:this._settings.tooltips.nextMonth}}},head:t=>{const e=s.create("tr");s.append(t,e);const i=a.clone();for(let t=1;t<=7;t++){i.setWeekDay(t);const a=s.create("th",{class:"fw-bold",text:i.dayName("narrow")});s.append(e,a)}},body:t=>{let e;for(;a.isSameOrBefore(i,"day");){1===a.getWeekDay()&&(e=s.create("tr"),s.append(t,e));const i=s.create("td",{text:a.format("dd")});s.append(e,i),this._isCurrent(a,"day")?s.addClass(i,"active"):this._viewDate.isSame(a,"month")||s.addClass(i,"text-secondary"),this._isValid(a,"day")?(s.addClass(i,"action"),s.setDataset(i,{action:this._settings.multiDate?"setDateMulti":"setDate",year:a.getYear(),month:a.getMonth(),date:a.getDate()})):s.addClass(i,"disabled"),this._now.isSame(a,"day")&&s.addClass(i,"today"),this._settings.renderDay&&this._settings.renderDay(a.clone(),i),a.add(1,"day")}}});s.append(this._dateContainer,n)},_renderTime(){const t=this._currentDate?this._currentDate:this._now,e=this._createTable({borderless:!0,body:e=>{const a=s.create("tr");s.append(e,a);const i=s.create("tr");s.append(e,i);const n=s.create("tr");s.append(e,n);const r=s.create("td",{html:`<span class="${this._settings.icons.up}"></span>`,class:"text-primary bw-bold py-4 px-0"}),d=t.clone().add(1,"hour");this._isValid(d,"second")?(s.addClass(r,"action"),s.setDataset(r,{action:"nextTime",unit:"hour"}),s.setAttribute(r,"title",this._settings.tooltips.incrementHour)):s.addClass(r,"disabled"),s.append(a,r);const o=s.create("td",{text:t.format(this._useDayPeriod?"hh":"HH"),class:"action time py-2 px-0",style:{width:"35%"},dataset:{action:"changeTimeView",timeView:"day"},attributes:{title:this._settings.tooltips.selectHour}});s.append(i,o);const h=s.create("td",{html:`<span class="${this._settings.icons.down}"></span>`,class:"text-primary bw-bold py-4 px-0"}),c=t.clone().sub(1,"hour");this._isValid(c,"second")?(s.addClass(h,"action"),s.setDataset(h,{action:"prevTime",unit:"hour"}),s.setAttribute(h,"title",this._settings.tooltips.decrementHour)):s.addClass(h,"disabled"),s.append(n,h);const l=s.create("td",{style:{width:"5%"}});s.append(a,l);const _=s.create("td",{text:":",class:"time py-2"});s.append(i,_);const u=s.create("td");s.append(n,u);const p=s.create("td",{html:`<span class="${this._settings.icons.up}"></span>`,class:"text-primary bw-bold py-4 px-0",style:{width:"35%"}}),m=t.clone().add(1,"minute");this._isValid(m,"second")?(s.addClass(p,"action"),s.setDataset(p,{action:"nextTime",unit:"minute"}),s.setAttribute(p,"title",this._settings.tooltips.incrementMinute)):s.addClass(p,"disabled"),s.append(a,p);const D=s.create("td",{text:t.format("mm"),class:"action time py-2 px-0",dataset:{action:"changeTimeView",timeView:"hour"},attributes:{title:this._settings.tooltips.selectMinute}});s.append(i,D);const g=s.create("td",{html:`<span class="${this._settings.icons.down}"></span>`,class:"action text-primary bw-bold py-4 px-0"}),y=t.clone().sub(1,"minute");if(this._isValid(y,"second")?(s.addClass(g,"action"),s.setDataset(g,{action:"prevTime",unit:"minute"}),s.setAttribute(g,"title",this._settings.tooltips.decrementMinute)):s.addClass(g,"disabled"),s.append(n,g),this._useDayPeriod){const e=s.create("td",{style:{width:"25%"}});s.append(a,e);const r=s.create("td");s.append(i,r);const d=s.create("span",{text:t.format("aa").toUpperCase(),class:"btn btn-primary d-block"}),o=t.getHours(),h=t.clone().setHours(o+(o<12?12:-12));this._isValid(h,"second")?(s.setDataset(d,{action:"togglePeriod"}),s.setAttribute(d,"title",this._settings.tooltips.togglePeriod)):s.addClass(d,"disabled"),s.append(r,d);const c=s.create("td");s.append(n,c)}}});s.append(this._timeContainer,e)},_renderYear(){const t=this._viewDate.clone().startOf("year"),e=this._viewDate.clone().endOf("year"),a=t.clone(),i=e.clone();t.sub(1,"second"),e.add(1,"second");const n=this._createTable({header:{title:this._viewDate.format("yyyy"),wide:!0,data:{action:"changeView",view:"decade"},attr:{title:this._settings.tooltips.selectYear},prev:!!this._isDateBetweenMinMax(t)&&{data:{action:"prev",unit:"year"},attr:{title:this._settings.tooltips.prevYear}},next:!!this._isDateBetweenMinMax(e)&&{data:{action:"next",unit:"year"},attr:{title:this._settings.tooltips.nextYear}}},body:t=>{const e=s.create("tr");s.append(t,e);const n=s.create("td",{class:"p-0",attributes:{colspan:7}});s.append(e,n);const r=s.create("div",{class:"row g-0"});for(s.append(n,r);a.isSameOrBefore(i,"month");){const t=s.create("div",{text:a.format("MMM"),class:"col-4 px-1 py-3"});s.append(r,t),this._isCurrent(a,"month")&&s.addClass(t,"active"),this._isDateBetweenMinMax(a,"month")?(s.addClass(t,"action"),this._settings.minView,s.setDataset(t,{action:"changeView",view:"month",year:a.getYear(),month:a.getMonth()})):s.addClass(t,"disabled"),this._settings.renderMonth&&this._settings.renderMonth(a.clone(),t),a.add(1,"month")}}});s.append(this._dateContainer,n)}}),Object.assign(d,{checkDayPeriod(t){if(!(t in this._dayPeriods)){const e=new Intl.DateTimeFormat(t,{hour:"2-digit"});this._dayPeriods[t]=e.formatToParts(new Date).find(t=>"dayPeriod"===t.type)}return this._dayPeriods[t]},getDefaultDateFormat(t){if(!(t in this._defaultDateFormats)){const e=new Intl.DateTimeFormat(t,{year:"numeric",month:"2-digit",day:"2-digit"});this._defaultDateFormats[t]=e.formatToParts(new Date).map(t=>{switch(t.type){case"year":return"yyyy";case"month":return"MM";case"day":return"dd"}return/[a-z]/i.test(t.value)?`'${t.value}'`:t.value}).join("")}return this._defaultDateFormats[t]},getDefaultFormat(t,e){if(!(t in this._defaultFormats)){const s=new Intl.DateTimeFormat(t,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});this._defaultFormats[t]=s.formatToParts(new Date).map(t=>{switch(t.type){case"year":return"yyyy";case"month":return"MM";case"day":return"dd";case"hour":return e?"hh":"HH";case"minute":return"mm";case"dayPeriod":return"a"}return", "===t.value?" ":/[a-z]/i.test(t.value)?`'${t.value}'`:t.value}).join("")}return this._defaultFormats[t]}}),Object.assign(d.prototype,{getDate(){return this._settings.multiDate?this._dates:this._currentDate?this._currentDate.clone():null},getDisabledDates(){return this._disabledDates},getDisabledDays(){return this._disabledDays},getDisabledHours(){return this._disabledHours},getDisabledTimeIntervals(){return this._disabledTimeIntervals},getEnabledDates(){return this._enabledDates},setDate(t){if(this._settings.multiDate)this._dates=this._parseDates(t),this._settings.keepInvalid||(this._dates=this._dates.filter(t=>this._isValid(t,"second"))),this._dates.length&&(this._viewDate=this._dates[0].clone());else{const e=this._parseDate(t);if(e&&!this._settings.keepInvalid&&!this._isValid(e,"second"))throw new Error("Invalid date supplied");this._currentDate=e,e&&(this._viewDate=e.clone())}return this.update(),this.refresh(),this},setDisabledDates(t){return this._disabledDates=this._parseDates(t),this._enabledDates=null,this.update(),this.refresh(),this},setDisabledDays(t){return this._disabledDays=t,this.update(),this.refresh(),this},setDisabledHours(t){return this._disabledHours=t,this.update(),this.refresh(),this},setDisabledTimeIntervals(){return this._disabledTimeIntervals=disabledTimeIntervals,this.update(),this.refresh(),this},setEnabledDates(t){return this._enabledDates=this._parseDates(t),this._disabledDates=null,this.update(),this.refresh(),this},setMaxDate(t){return this._maxDate=this._parseDate(t),this.update(),this.refresh(),this},setMinDate(t){return this._minDate=this._parseDate(t),this.update(),this.refresh(),this},setViewDate(t){return this._viewDate=this._parseDate(t),this.refresh(),this},update(){let t="";return this._settings.multiDate?t=this._dates.sort((t,e)=>t.isBefore(e)?-1:1).map(t=>t.format(this._settings.format)).join(this._settings.multiSeparator):this._currentDate&&(t=this._currentDate.format(this._settings.format)),s.setValue(this._node,t),this}}),d.defaults={format:null,locale:DateFormatter.defaultLocale,timeZone:n.defaultTimeZone,defaultDate:null,minDate:null,maxDate:null,enabledDates:null,disabledDates:null,enabledDays:null,disabledDays:null,enabledHours:null,disabledHours:null,disabledTimeIntervals:null,multiDate:!1,multiDateSeparator:",",icons:{up:"icon-arrow-up",right:"icon-arrow-right",down:"icon-arrow-down",left:"icon-arrow-left"},tooltips:{decrementHour:"Decrement Hour",decrementMinute:"Decrement Minute",incrementHour:"Increment Hour",incrementMinute:"Increment Minute",nextDecade:"Next Decade",nextMonth:"Next Month",nextYear:"Next Year",prevDecade:"Previous Decade",prevMonth:"Previous Month",prevYear:"Previous Year",selectDate:"Select Date",selectHour:"Select Hour",selectMinute:"Select Minute",selectMonth:"Select Month",selectTime:"Select Time",selectYear:"Select Year",togglePeriod:"Toggle Period"},keyDown:function(t){let e=this._currentDate?this._currentDate:this._now.clone();switch(t.key){case"ArrowUp":t.ctrlKey?e.sub(1,"year"):e.sub(7,"days");break;case"ArrowDown":t.ctrlKey?e.add(1,"year"):e.add(7,"days");break;case"ArrowRight":t.ctrlKey?e.add(1,"month"):e.add(1,"day");break;case"ArrowLeft":t.ctrlKey?e.sub(1,"month"):e.sub(1,"day");break;case"PageUp":e.add(1,"hour");break;case"PageDown":e.sub(1,"hour");break;case"Home":e=this._now.clone();break;case"Delete":e=null;break;default:return}t.preventDefault(),this.setDate(e)},renderDay:null,renderHour:null,renderMinute:null,renderMonth:null,renderYear:null,useCurrent:!1,keepOpen:!1,focusOnShow:!1,minView:null,inline:!1,sideBySide:!1,keepInvalid:!1,stepping:1,duration:100,placement:"bottom",position:"start",fixed:!1,spacing:3,minContact:!1},d._formatTokenRegExp=/([a-z])\1*|'[^']*'/gi,d._dateTokenRegExp=/[GyYqQMLwWdDFEec]/,d._timeTokenRegExp=/[ahHKkmsS]/,d._dayPeriods={},d._defaultDateFormats={},d._defaultFormats={},a&&(a.prototype.dateTimePicker=function(t,...s){let a,i;e.isObject(t)?a=t:e.isString(t)&&(i=t);for(const t of this){if(!e.isElement(t))continue;const n=d.init(t,a);i&&n[i](...s)}return this}),i.DateTimePicker=d}));